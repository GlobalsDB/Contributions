<?xml version="1.0" encoding="UTF-8" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated Jul 17, 2012 9:47:59 PM-->
<project xmlns="antlib:org.apache.tools.ant" name="GlobalsDBGraphAPI_Tests" default="all" basedir=".">
    <property file="glbgraphapi_tests.ant.properties"/>
    <!--
  
  -->
    <import file="../GlobalsDBUtils/globalsdbutils.ant.xml"/>
    <!--
  
  -->
    <path id="library.JUnit.4.Runtime">
        <pathelement location="${oracle.home}/jdev/extensions/oracle.jdeveloper.junit/junit4.5/junit-4.5.jar"/>
    </path>
    <!--
  
  -->
    <path id="library.GlobalsDB">
        <pathelement location="/opt/GlobalsDB.org/dev/java/lib/JDK16/globalsdb.jar"/>
    </path>
    <!--
  
  -->
    <path id="classpath">
        <path refid="library.JUnit.4.Runtime"/>
        <path refid="library.GlobalsDB"/>
    </path>
    <!--
  
  -->
    <target name="init">
        <tstamp/>
        <mkdir dir="${output.dir}"/>
    </target>
    <path id="RuntimeClasspath">
        <pathelement location="${output.dir}"/>
        <path refid="classpath"/>
    </path>
    <!--
  
  -->
    <target name="runwithGlb" description="try a run" depends="compile">
        <javaWithGlobals targetclass="com.intersys.globals.graphapi.tests.GlobalsDBGraphTest_getconn"
                         runclasspathref="RuntimeClasspath"/>
    </target>
    <!-- 
    
    -->
    
    
    <target name="DevTest" description="Run the JUnit tests on API" depends="compile,GlobalsDBUtils.startglobals" >
        <property name="globalstest.suite.dev" value="com.intersys.globals.graphapi.tests.DuringDev" />
        <junit fork="true" dir="tests" printsummary="true" showoutput="true">
            <formatter type="plain" usefile="false" />
            <sysproperty key="java.library.path" value="${toString:globalsdbutils.binpath}"/>
            <sysproperty key="globalsdbutils.home" value="${globalsdbutils.home}"/>
            <env key="PATH" value="${toString:globalsdbutils.newpath}"/>
            <env key="GLOBALS_HOME" value="${globalsdbutils.home}"/>
            <env key="DYLD_LIBRARY_PATH" value="${toString:globalsdbutils.binpath}"/>
            <env key="LD_LIBRARY_PATH" value="${toString:globalsdbutils.binpath}"/>
            <classpath>
                <path refid="RuntimeClasspath"/>
            </classpath>
            <test name="${globalstest.suite.dev}" />
        </junit>
        <echo message="Completed development-test suite '${globalstest.suite.dev}'" />
        
    </target>
    <!--
  
  -->
  
    <target name="junittest" description="Run the JUnit tests on API" depends="compile,GlobalsDBUtils.startglobals" >
        <mkdir dir="tests/test-results"/>
        <junit fork="true" dir="tests" printsummary="true" showoutput="true" >
            <formatter type="plain" usefile="false" />
            <sysproperty key="java.library.path" value="${toString:globalsdbutils.binpath}"/>
            <sysproperty key="globalsdbutils.home" value="${globalsdbutils.home}"/>
            <env key="PATH" value="${toString:globalsdbutils.newpath}"/>
            <env key="GLOBALS_HOME" value="${globalsdbutils.home}"/>
            <env key="DYLD_LIBRARY_PATH" value="${toString:globalsdbutils.binpath}"/>
            <env key="LD_LIBRARY_PATH" value="${toString:globalsdbutils.binpath}"/>
            <classpath>
                <path refid="RuntimeClasspath"/>
            </classpath>
            <batchtest todir="tests/test-results" >
                <fileset dir="${output.dir}">
                    <include name="**/*Test_*.class"/>
                </fileset>
            </batchtest>
        </junit>
    </target>
    <!--
  
  -->
    <target name="all" description="Build the project" depends="compile,copy"/>
    <!--
  
  -->
    <target name="clean" description="Clean the project">
        <delete includeemptydirs="true" quiet="true">
            <fileset dir="${output.dir}" includes="**/*"/>
        </delete>
    </target>
    <!--
  
  -->
    <target name="compile" description="Compile Java source files" depends="init">
        <javac destdir="${output.dir}" classpathref="classpath" debug="${javac.debug}" nowarn="${javac.nowarn}"
               deprecation="${javac.deprecation}" encoding="UTF-8" source="1.6" target="1.6">
            <src path="../GlobalsDBGraphAPI/src"/>
        </javac>
        <javac destdir="${output.dir}" classpathref="classpath" debug="${javac.debug}" nowarn="${javac.nowarn}"
               deprecation="${javac.deprecation}" encoding="UTF-8" source="1.6" target="1.6">
            <src path="src"/>
        </javac>
    </target>
    <!--
  
  -->
    <target name="copy" description="Copy files to output directory" depends="init">
        <patternset id="copy.patterns">
            <include name="**/*.GIF"/>
            <include name="**/*.JPEG"/>
            <include name="**/*.JPG"/>
            <include name="**/*.PNG"/>
            <include name="**/*.cpx"/>
            <include name="**/*.dcx"/>
            <include name="**/*.ejx"/>
            <include name="**/*.gif"/>
            <include name="**/*.ini"/>
            <include name="**/*.jpeg"/>
            <include name="**/*.jpg"/>
            <include name="**/*.png"/>
            <include name="**/*.properties"/>
            <include name="**/*.sva"/>
            <include name="**/*.tag"/>
            <include name="**/*.tld"/>
            <include name="**/*.wsdl"/>
            <include name="**/*.xcfg"/>
            <include name="**/*.xlf"/>
            <include name="**/*.xml"/>
            <include name="**/*.xsd"/>
            <include name="**/*.xsl"/>
        </patternset>
        <copy todir="${output.dir}">
            <fileset dir="src">
                <patternset refid="copy.patterns"/>
            </fileset>
            <fileset dir="../GlobalsDBGraphAPI/src">
                <patternset refid="copy.patterns"/>
            </fileset>
        </copy>
    </target>
    <!--
  
  -->
</project>
